<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="main">
 
 	<select id="goodsList" parameterType="Int" resultType="goodsList">
 		select idx, img, name, price from goods where idx between #{idx} and #{idx}+5
 	</select>
 	
 	<select id="goodsRank" parameterType="Int" resultType="goodsList">
 		select idx, img, name, price from goods where idx between #{idx} and #{idx}+8
 	</select>
 	
 	<select id="goodsDetails" parameterType="Int" resultType="goodsDetails">
 		select g.name, g.price, gd.description, gd.detailsimg  from goods g, goodsdetails gd where g.idx = gd.goods_idx and g.idx = #{idx}
 	</select>
 	
 	<select id="DetailsImg" parameterType="Int" resultType="String">
 		select img from goodsimg where goods_idx = #{idx}
 	</select>
 	
 	<select id="searchResult" parameterType="String" resultType="goodsList">
 		select g2.idx, g2.img, g2.name , g2.price from (select rownum rnum, g.* from goods g where name like '%${name}%') g2 where rnum between 1 and 10
 	</select>
 	
 	<insert id="insertChatting" parameterType="map">
 		insert into chat (idx, sender, recipient, content, sendDate) values
 		(chat_seq.nextval, #{sender}, #{recipient}, #{content}, sysdate)
 	</insert>
 	
 	<select id="selectChattingList" parameterType="String" resultType="chattingVO">
 		select * from chat where sender = #{id} or recipient = #{id} order by sendDate
 	</select>
 
</mapper>
